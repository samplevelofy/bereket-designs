---
import PortfolioLayout from '../layouts/PortfolioLayout.astro';
import DesignCard from '../components/DesignCard.astro';
import { supabase } from '../lib/supabase';
import type { Design } from '../lib/types';

let designs: Design[] = [];
const { data } = await supabase.from('designs').select('*').order('created_at', { ascending: false });
if (data) { designs = data; }
---
<PortfolioLayout title="Selected Work">
  <header class="page-header">
    <h1>Selected Work</h1>
  </header>
  <div class="masonry-grid">
    {designs.map(design => <DesignCard design={design} />)}
  </div>
</PortfolioLayout>
<style>
  .page-header {
    margin-bottom: 3rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
  }
  h1 { font-size: 2.5rem; }
  .masonry-grid {
    column-gap: 1.5rem;
    column-count: 1;
  }
  @media (min-width: 768px) { .masonry-grid { column-count: 2; } }
  @media (min-width: 1200px) { .masonry-grid { column-count: 3; } }
</style>